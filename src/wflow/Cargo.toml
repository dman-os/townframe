[package]
name = "wflow"
version.workspace = true
edition.workspace = true

[lib]
path = "lib.rs"

[features]
default = ["test-harness"]
test-harness = ["wasmtime", "insta"]

[dependencies]
wflow_core.workspace = true
wflow_tokio.workspace = true
utils_rs.workspace = true
async-trait.workspace = true
serde.workspace = true
serde_json.workspace = true
time.workspace = true
anyhow.workspace = true
displaydoc.workspace = true
thiserror.workspace = true
parking_lot.workspace = true
tokio = { workspace = true, features = ["rt-multi-thread", "sync", "macros", "fs"] }
tokio-util.workspace = true
futures.workspace = true
async-channel.workspace = true
wash-runtime.workspace = true
wash_plugin_wflow = { path = "../wash_plugin_wflow" }
wash_plugin_am_repo.workspace = true
wash_plugin_utils = { path = "../wash_plugin_utils" }
tracing.workspace = true
samod.workspace = true
wasmtime = { workspace = true, optional = true }
insta = { workspace = true, optional = true, features = ["json"] }

[dev-dependencies]
utils_rs = { workspace = true, features = ["hash", "automerge", "console-subscriber"] }
automerge.workspace = true
samod.workspace = true
futures.workspace = true
tokio = { workspace = true, features = ["rt", "time", "macros", "sync", "tracing"] }
serde = { workspace = true, features = ["derive"] }
serde_json.workspace = true
color-eyre.workspace = true
tracing-subscriber.workspace = true
wasmtime.workspace = true
