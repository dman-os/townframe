# TODO

- Immediate proveout
  - [ ] Plugins/extensability
    - [ ] Registry
      - [ ] OCI based
    - [x] Un-previlaged processors should go in their own branch
  - [ ] Backup ATProto PD
  - [ ] Chatbot
  - [ ] Generated UI
  - [ ] FUSE/dpath
  - [ ] Programmability
    - Dynamic processors, defined in document?
      - I could just describe to the LLM what the document is to do and it could write it
  - [ ] Granary
  - [ ] Import Obsidian vault
- [ ] Best in class in something?
  - [ ] Ingest?
    - [ ] Email
    - [ ] SMS
  - [ ] Programmability?
    - [ ] How to beat web tech?

## Stack

- [ ] P2P
  - [ ] iroh
- [ ] Deterministic doc ids for main docs
- [ ] Prune dependencies
- [ ] Blobs server
  - [ ] Iroh blobs?
  - [ ] Chunked hashing for transfers
    - Chunks at rest?
- [ ] Good and local document classification
  - [ ] Receipt parsing
  - [ ] Collators
- [ ] daybook_server
  - [ ] Decide on wrpc vs json
- [ ] DrawerScreen
  - [ ] Search FAB
  - [ ] Press again to change views
- [ ] Mltools config should be per device
- [ ] Processors should only run on device that created the doc
- [ ] use a env var or an env! var to set global multipliers for our test timeouts
- [ ] File locks on repo
- [ ] Store plugin info in drawer??
- [ ] Js execution
  - [ ] https://json-render.dev/ based display
- [ ] DocEditor
- [x] Progress system
  - [ ] Blob download
- [x] Overhaul bottom bar
  - [ ] Change color when in different modes.
  - [ ] Experiment with floating bottom bar
- [ ] Repos
  - [ ] Profiles
  - [x] CLI support
    - [ ] Make it nice
  - [ ] GUI support
- [ ] Bugs
  - [ ] `WflowNotFound`
    - `HostEvent(WflowRegistered)``?
- [ ] Cancellation and shutdown
  - [ ] Kotlin repo's should call close on Activity teardown
  - [ ] Assert samod fsyncs reliably
  - [ ] Notification handling
    - [ ] How to avoid missing triage work?

- [ ] Cleanup and show it to people

- [ ] Tutorial
- [ ] sqlite
  - [ ] SQL table schema/data update path
  - [ ] Replace sqlite-vec
- [ ] CI/CD
  - [ ] Kotlin tests
  - [ ] Version tagging and releases
  - [ ] Continuius builds on push to main
  - [ ] Publish
    - [ ] Docker image
    - [ ] WASM OCI
    - [ ] Android APK 
      - [ ] to F-Droid
    - [ ] Linux Appimage
      - [ ] to Flathub
    - [ ] Windows.exe
      - [ ] to Scoop.sh
- [ ] Keychains for secrets
 
 - [ ] Cleanup for public pre-alpha
 
- [ ] Tutorial
- [ ] Replace Path with camino at certain places
- [ ] Explore multi doc drawer
  - [ ] Drawer doc migration where a drawer is marked as deprecated and all devices that have seen it must merge it into the active docs. This allows eventually consistent garbage collection
- [ ] Redirects/Docmerging/Redactions
- [ ] Cross-routine,cross-plugin risk analysis
  - [ ] Can a routine with previlaged outbound access exfiltrate data by coordinating with another that has previlaged read access?
  - [ ] Harsher bounds on data shapes
  - [ ] LLM auidted registry subset
    - Open-source
- [ ] Screenshots and screen recording
  - [ ] How to make it cross platform easily?
- [ ] Publishing
  - [ ] ATProto
  - [ ] Apub
  - [ ] POSSE
- [ ] wrpc + iroh
- [ ] `mltools`
  - [ ] OCR
    - [ ] Local
  - [ ] Embeedding
    - [ ] Local
  - [ ] STT
  - [ ] API client
  - [ ] Router
  - [ ] durable-streams
  - [ ] Model manager
    - [ ] Store in repo
- [ ] E2E tests for daybook
- [ ] Drawers v2
  - [x] Constrain value shapes for known keys at drawer
    - [x] JSONSchema checks
  - [x] Rename props to facets
  - [x] `dmeta`
  - [x] LRU caches
  - [x] Facet ref index
  - [x] URLs
    - [x] Facet URL
    - [x] Doc URL
  - [ ] `dpath`
    - [ ] Dpath for plugin info
- [ ] Plugins
  - [x] Manifest
  - [ ] Commands
    - [x] `daybook x command`
  - [ ] Rt
    - [x] Wflow preparation
    - [x] Predicates
  - [ ] Handlers
  - [x] Processors
  - [ ] OCI
- [ ] File lock on repo
- [ ] daybook_cli
    - [ ] `daybook pset docId propKey value`
    - [ ] `daybook pget docId propKey`
    - [ ] `daybook grep`
    - [ ] `daybook sed`
- [ ] wflow
  - [ ] Non-wasm impl
    - [ ] Catch panics
  - [x] in-memory smoke
  - [ ] Ingress workload [server]
  - [ ] Durablity
  - [x] Snapshots
  - [ ] Use flatbuffers instead of JSON
  - [ ] web UI
  - [ ] Service for wflow_tokio [LOST]
- [ ] pauperfuse
- [ ] Deploy
  - [ ] Buy domain
    - [ ] https://daybook.com (taken :/)
    - [ ] https://townframe.com (taken :/)
    - [ ] https://db.tf (not avail :/)
    - [ ] https://daybook.tf
    - [ ] https://ton.tf (need to be an EU resident :/)
      - [ ] https://mother.ton.tf
      - [ ] https://motherton.db.tf
      - [ ] https://mother.town.tf
- [ ] PgLite based testing
- [ ] Convert DHashMap to be wrapper around RwLock<HashMap>
- [ ] DRY up all the wit bindgen
- [ ] Move http tests into api crates
  - [ ] Replace http with wrpc?
- [ ] Code generator for http wrapper
- [ ] Policy against tokio mutexes (cancel safety)
- [ ] Move to wasmcloud v2
  - [ ] Use async on wit_bindgen
    - [ ] Replace tokio with wstd or wit_bindgen::block_on
  - [ ] Wasi 0.3
    - [ ] wRPC everything??
- [x] Replace time with jiff??
- [ ] Pipeline editor web app
- [ ] Magic wand
  - [ ] Follow bubble behavior from android
  - [ ] Status bar/Gesture bar insets for puck and widgets
  - [ ] Puck drop required to be on center bug
- [ ] WYSIWYG editor
- [ ] FUSE
  - [ ] Make it feature complete
- [ ] PgLite
  - [ ] Get parametrized queries to work
  - [ ] It should accept engine from outside
- [ ] autosurgeon
  - [ ] Automorph
  - [ ] Finish autosurgeon::Patch
  - [ ] autosurgeon does't respect serde attribs like untagged and camelCase
    - [ ] Fork with context generic programming?
    - So I've implemented ThroughJson as a solution for this
- [ ] Lints and pre-commit hooks
  - [ ] Kotlin formats & lints
  - [ ] Triple X comment detector
- [ ] UI tests
- [ ] Cross-platform testing
  - [ ] iOS
  - [ ] Windows
  - [ ] macOS
- [ ] GraalVM for Linux
- [ ] Cross-device networking features

### The Big Lifts

- [ ] Good text editor
- [ ] Camera stack
  - [ ] Fully featured Camera2 impl on Android
  - [ ] Filters
- [ ] Screen recording
- [ ] Agent OS
- [ ] UI applets
